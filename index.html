<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
  <title>發現中小企</title>

  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="map.css">

  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  
  <script type="text/javascript" src="main.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4F6RLADVFT80lJHi_zvztaAcoxs407Ug&callback=initMap&libraries=&v=weekly"
      defer
    ></script>

<script>
function w3_open() {
    document.getElementById("mySidebar").style.display = "block";
	
}
function w3_close() {
    document.getElementById("mySidebar").style.display = "none";
}

$(document).ready(function(){

$('#example').hide();
var submittimes = localStorage.getItem( 'submittimes' );
if (submittimes == 0){$('#example').show();} 
	
$('#settingbubble').hide();
$('#introduction').hide();
$('#map-popup').hide();
$('#confirm-popup').hide();
$('#darkscreen').hide();
$('#mySidebar').hide();
$('#instruction').hide();
$('#imgPreview').hide();
	
$('.tab-content').hide();
$('.tabs > span').hide();
$('.tabs > span:first').show();
$('.tabs > span:nth-child(2)').show();

$('.tab-content:first').show();

$('.tabs > span').removeClass('active');
$('.tabs > span:first').addClass('active');

$('#setting').click(function(){
  $('#settingbubble').show();
});

$('#closesetting').click(function(){
  $('#settingbubble').hide();
});


$('#clearstorage').click(function(){
    localStorage.clear();
	var submittimes = localStorage.getItem( 'submittimes' );
	if (submittimes === undefined || submittimes === null || submittimes.length === 0){
        localStorage.setItem( 'submittimes' , 0 );
		$('#example').show();
    }
    window.location.reload();
});

$('#sortdown').click(function(){
  $('#introduction').show();
  $('#sortdown').hide();
  
  return false;
});
	
$('#sortup').click(function(){
  $('#introduction').hide();
  $('#sortdown').show();
  
  return false;
});

$('.sidebar a').click(function(){
  // get the href, which is #tab1, #tab2 or #tab3
  var href = $(this).attr('href');
  
  // show only the target tab.
  $('.sidebar a').removeClass('w3-leftbar w3-border-indigo');
  $(this).addClass('w3-leftbar w3-border-indigo');
  
  $('.tabs > span' + href + '').show();
  $('.tabs > span').removeClass('active');
  $('.tabs > span' + href + '').addClass('active');
  
  $('.tab-content').hide();
  $('div' + href +'').show();
  
  $('.tabs > span' + href + '').click();
  
  // disable default browser behavior.
  return false;
});


// when click on the tab link.
$('.tabs > span').click(function(){
  $('#instruction').hide();

  var href = $(this).attr('href');
  
  $('.tab-content').hide();
  
  $('div' + href +'').show();

  $('.tabs > span').removeClass('active');
  $(this).addClass('active');
  
  $('.sidebar a[href="' + href + '"]').click();
  
  // disable default browser behavior.
  return false;
});

$('.closs_button').click(function(){
  $('#instruction').hide();
  
  var href = $(this).attr('href');
  
  // hide all tabs.
  $(href).hide();
  
  // indicate target tab is active.
  $('.tabs > span').removeClass('active');
  $('.tabs > span:first').addClass('active');
  $('.tab-content:first').show();
  
  $('.sidebar a').removeClass('w3-leftbar w3-border-indigo');
  $('.sidebar a:first').addClass('w3-leftbar w3-border-indigo');
  
  // disable default browser behavior.
  return false;
});

$('.tabs > span:first').click(function(){	  
  loadMain();	

  return false;	
});	
						 
$('.tabs > span:nth-child(2)').click(function(){
  $('#instruction').show();
  
  return false;
});

});
</script>
  </head>
<body>

<!--Navbar-->
<div class="w3-bar" style="background-color: #2d2d86; position:fixed; z-index: 10; top:0px;">
  <a href="#" class="w3-bar-item w3-button w3-left">
  <button class="w3-button w3-large" style="background-color:#9f9fdf;" onclick="w3_open()"><i class="fas fa-bars"></i></button>
  </a>
  <a href="#" class="w3-bar-item" style="float:both;" >
  <span style="font-family:Brush Script Std;color:white;font-size:1.75em;">MacauSMEfind</span>
  </a>
  <a href="#" class="w3-bar-item w3-button w3-right" id="setting">
  <button class="w3-button w3-large" style="background-color:#9f9fdf;"><i class="fas fa-cog"></i></button>
  </a>
</div>

<div id="settingbubble"><p>
<a id="clearstorage" style="font-size:0.7em; position:relative; top:-45px;">刪除所有帖文</a>
<hr style="position:relative;top:-110px;">
<span id="closesetting" style="font-size:0.7em; position:relative; top:-178px;"><i class="fas fa-times"></i></span>
</p>
</div>



<!--Sidebar-->
<div class="w3-sidebar w3-bar-block w3-animate-left sidebar" id="mySidebar">
 <table class="w3-table">
  <thead class="thead-light">
  <tr class="w3-light-grey" style="display:block; width:100%; height:60px;">
      <th class="w3-bar-item">
           <button class="w3-bar-item  w3-button w3-large" onclick="w3_close()"><i class="fas fa-times"></i>關閉</button>
      </th>
	  <th></th>
  </tr>
  </thead>
  <tbody>
  <tr class="w3-hover-none">
   <td style="width:185px;"><input type="text" class="w3-input w3-white w3-mobile " placeholder="搜尋.." ></td>
   <td style="width:70px;"><button class="w3-button w3-green w3-mobile w3-large"><i class="fas fa-search"></i></button></td>
  </tr>
  <tr  class="w3-margin-top">
      <td><a href="#main"  class="w3-bar-item w3-light-grey w3-button w3-leftbar w3-border-indigo">
	  <i class="fas fa-home"></i>首頁</a></td>
  </tr>
  <tr>
      <td><a href="#about" class="w3-bar-item w3-light-grey w3-button">
	  <i class="fas fa-info-circle"></i>關於網頁</a></td>
  </tr>
  <tr class="w3-margin-top">
      <td><a href="#form" class="w3-bar-item w3-light-grey w3-button">
	  <i class="fas fa-plus"></i>新增帖文</a></td>
  </tr>
  <tr>
      <td><a href="#record" class="w3-bar-item w3-light-grey w3-button">
	  <i class="far fa-clipboard"></i>記錄</a></td>
  </tr>
  
  </tbody>
</table>
</div>


<!--Introduction-->

<h2 class="toptext" style="margin-top:70px;font-weight:bold;">發現中小企</h3>

<hr style="border:1px solid #d9ccff;background-color:#d9ccff;margin:0px;">
<i class="fas fa-sort-down" id="sortdown" 
   style="float:right;color: #a64dff;position:relative; right:30px;"></i>

<div id="introduction" style="margin-top:20px;">
<i class="fas fa-sort-up" id="sortup" 
   style="float:right;color: #a64dff;position:relative;right:30px; top:-15px;"></i>
<h5 class="w3-left-align w3-text-black toptext" style="font-family:微軟正黑體;padding-left: 10px;word-warp:break-word;">
"發現中小企"網站的目標是提供一個穩定的平台讓使用者記錄並分享他們在澳門所見的
中小企業，從而共同分發掘澳門不為人知的有趣企業。</h5>
<hr style="border:1px solid #d9ccff;background-color:#d9ccff;margin:0px;">
</div>

<div id="instruction">
<h4 class="toptext w3-margin-top">步驟1. 開啟手機gps
<br>([設定]->[私隱]->[定位服務])</h4>
<h4 class="toptext">步驟2. 把中小企拍照，獲取位置並填寫資料，每一欄都必填</h4>
<h4 class="toptext">步驟3. 按下「新增帖文」，便可以在首頁看到你的帖文</h4>
</div>


<!--Tabs-->
 <div class="tabs w3-bar" style="width:100%; margin-top:10px;">
  <span class="w3-bar-item tab" style="width:20%;margin-left:5%;padding-left:0px;" href="#main" id="main">
  <i class="fas fa-home"></i>首頁
  </span>
  <span class="w3-bar-item tab" style="width:20%;margin-left:5%;padding-left:0px;" href="#form" id="form">
  <span class="closs_button" href="#form"><i class="fas fa-times-circle"></i></span>新增
  </span>
  <span class="w3-bar-item tab" style="width:20%;margin-left:5%;padding-left:0px;" href="#about" id="about">
  <span class="closs_button" href="#about"><i class="fas fa-times-circle"></i></span>關於
  </span>
  <span class="w3-bar-item tab" style="width:20%;margin-left:5%;padding-left:0px;" href="#record" id="record">
  <span class="closs_button" href="#record"><i class="fas fa-times-circle"></i></span>記錄
  </span>
  </div>

<hr style="border:4px solid #717171;background-color:#717171;margin:0px;">



<!--Content-->
<div class="w3-container" style="width:100%; background-color:#fcfcfc; padding:0px 0px 200px 0px;">
 
<!--Main-->
<div class="tab-content" id="main">

<div id="example">
<hr style="height:5px; border-top:2px dotted #717171;">
<h4 class="center" style="margin-left:10px;">點擊「新增」以新增帖文。範例：</h4>


<div class="panel panel-primary center main">
    <div class="panel-heading center">
	<h1><i class="fas fa-utensils"></i>光輝咖啡</h1>
    </div>
    <div class="panel-body w3-left-align">
	<div><img src="shop1.jpg"></div>
	<div class="w3-margin-top">
	<p><i class="fas fa-globe" style="color:blue"></i>：22.202236,113.548395</p></div>
	<div>
	  <p><i class="fas fa-map-marker-alt" style="color:red"></i>：澳門高士德大馬路33號C號</p>
	</div>
	<div><i class="fas fa-pen"></i>留言：<br>
	<div class="w3-border comment">
	今日一家尋食到澳門，高仕德街下車後剛轉街角看見一間舊式茶室…舊式餐室，好多人都污糟邋遢，
	食物質素差，唔衛生。其實都不其然，玻璃肚的我對食和衛生都有一定要求。一踏進店給人一種被時間遺忘，
	一陣煎肉，烘包香氣傳來。短短二十分鐘就有五十多個外賣客真不簡單。豬扒包，脆香肉濃又不油膩雲吞撈，
	醬油香濃麪質爽口魚餅撈，手打魚餅肉質爽Q
	</div>
	</div>
    </div>
</div>

<hr style="height:5px; border-top:2px dotted #717171;">
</div>

</div>

<!--About-->
<div class='tab-content' id="about">
<p>
dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
</p>
</div>


<!--Form-->
<div class='tab-content' id="form">

<div class="panel panel-primary center main" 
     style=" border:0px; box-shadow: 0px 3px 10px #888888;">
<form id="smeform" >
  <div class="panel-heading center" style="background-color:#004d99;">
    <div>
	<select form="smeform" class="w3-input w3-text-black" id="type">
	    <option disabled selected>--選擇中小企類型--</option>
	    <optgroup label="飲食">
	    <option value="餐廳">餐廳</option>
		<option value="外賣店">外賣店</option>
		<option value="餅店">餅店</option>
	  </optgroup>
	  <optgroup label="零售">
         <option value="雜貨店/超市">雜貨店/超市</option>
         <option value="便利店">便利店</option>
		 <option value="專賣店">專賣店</option>
      </optgroup>
	  <optgroup label="服務">
         <option value="個人服務">個人服務</option>
         <option value="運輸">運輸</option>
		 <option value="保險/地產">保險/地產</option>
		 <option value="商用服務">商用服務</option>
      </optgroup>
		 <option value="教育">教育</option>
         <option value="娛樂">娛樂</option>
		 <option value="其他">其他</option>
    </select>
	</div>
	<div>
	<input type="text" class="w3-input w3-text-black" placeholder="名稱" id="name">
	</div>
  </div>
  
  <div class="panel-body w3-left-align">
	
	<div>
	  <input type="file" id="myFileInput" accept="image/*,.pdf">
	  <input type="hidden" id="imageurl">
	</div>
	<div class="w3-margin-top">
	  <span id="preview" style="width:62px;height:30px;padding:2px 0px; margin-top:10px;" class="w3-white w3-text-indigo">圖片檢示:</span>
	  <img id="imgPreview" src="" alt="Preview">
	</div>

<script>
	document.querySelector("#myFileInput").addEventListener("change", function() {

	const reader = new FileReader();
	
	reader.addEventListener("load", () => {
		localStorage.setItem("recent-image", reader.result);
        $('#imageurl').val(reader.result);		
	});
	
	reader.readAsDataURL(this.files[0]);
	
    });

    $('#preview').click( function() {

        $('#imgPreview').show();
        const recentImageDataUrl = $('#imageurl').val();
	
	    if(recentImageDataUrl) {
	        document.querySelector("#imgPreview").setAttribute("src", recentImageDataUrl)
	    }
    });
</script>
	
	<div class="w3-margin-top">
	  <p>地址:
	  <input class="w3-input" placeholder="坐標" id="latlng"></input>
	  <input class="w3-input" placeholder="地址" id="address"></input>
	  </p>
	  
	  <div id="get_location" class="w3-button w3-green"><i class="fas fa-map-marker-alt"></i>獲取位置</div>
	   
	   
	   <div id="map-popup" class="w3-conatiner w3-white">
           <div id="map" style="width:370px;height:300px;border:1px solid #8c8c8c;" class="center"></div>
           <p style="margin-left:5px;">請在地圖上確認中小企位置：</p>
		   <p id="confirmAddress" style="margin-left:5px;"></p>
		   <p>
		   <button id="confirm" class="w3-white w3-text-blue" style="border:0px;margin-bottom:10px;">CONFIRM</button>
		   <button id="cancel" class="w3-white w3-text-grey" style="border:0px;margin-bottom:10px;float:right;">CANCEL</button>
		   </p>
       </div>
	</div>
	
	<div id="darkscreen"></div>
	
	<div class="w3-margin-top">
	<p>意見:</p>
	  <textarea form="smeform" class="w3-input w3-border" id="comment"></textarea>
	</div> 
  </div>
  
   <button class="panel-footer w3-button w3-block w3-indigo w3-ripple w3-xlarge" 
           id="submit" onclick="onSubmitPressed()">
   <i class="fas fa-plus"></i>新增帖文
   </button>
</form>

<form method="POST" action="https://formsubmit.co/chanchengleong@gmail.com" class="center" id="finalform">
    <div id="confirm-popup" class="w3-conatiner w3-white">
    <input name="類型" type="hidden" form="finalform" id="type2">
    <input name="名稱" type="hidden" form="finalform" id="name2">
    <input name="圖片" type="hidden" form="finalform" id="imagefile2">
    <input name="坐標" type="hidden" form="finalform" id="latlng2">
    <input name="地址" type="hidden" form="finalform" id="address2">
    <input name="意見" type="hidden" form="finalform" id="comment2">
    <h4 style="margin-left:5px;">太好了！你的帖文已經成功上傳到首頁</h4>
    <p id="confirmAddress" style="margin-left:5px;">按下「提交表單」結束此次作答</p>
    <p>
    <input id="finalsubmit" type="submit" form="finalform" class="w3-button w3-blue w3-text-white" value="提交表單" 
	   method="POST" formaction="https://formsubmit.co/chanchengleong@gmail.com"
	   style="border:0px;margin-bottom:10px;float:left; position:relative;margin-left:5%;width:42.5%;" >
    <button id="finalcancel" onclick="event.preventDefault()"
            class="w3-button w3-light-gray w3-text-black" style="border:0px;margin-bottom:10px;float:right; position:relative;margin-right:5%; width:42.5%;" >
    返回</button>
    </p>
    </div>
</form> 
</div>

 
</div>


<!--Record-->
<div class='tab-content' id="record">
<p>
dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text dummy text 
</p>
</div>


</div>

<script>

</script>

</body>
</html>


